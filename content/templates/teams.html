{% extends 'main.html' %}
{% load static %}

{% block additionalCSS %}
    <link rel="stylesheet" href="{% static 'css/' %}{{ config.teamsPageCSS }}">
{% endblock %}

{% block content %}
    <div class="edit_team container-fluid">
        <h2>{{ config.editTeamHeader }}</h2>
        {% if content.forms.mod %}
            <div class="team_form">
                <form method="POST" action="" id="mod_form">
                    {% csrf_token %}
                    {{ content.forms.form.as_p }}
                </form>
            </div>
            <div class="submit_team">
                <button type="submit" name="mod_team" value="Submit" class="btn btn_team_submit" form="mod_form">
                    <img src="{% static 'images/' %}{{ config.submitTeamIcon }}" alt="submit_team">
                    <p>{{ config.submitEditTeam }}</p>
                </button>
                <button type="submit" name="cancel_team" value="Cancel" class="btn btn_team_cancel" form="mod_form" formnovalidate>
                    <img src="{% static 'images/' %}{{ config.cancelTeamIcon }}" alt="cancel_team">
                    <p>{{ config.submitAbort }}</p>
                </button>
            </div>
        {% else %}
            {% if content.forms.add %}
                <div class="team_form">
                    <form method="POST" action="" id="add_form">
                        {% csrf_token %}
                        {{ content.forms.form.as_p }}
                    </form>
                </div>
                <div class="submit_team">
                    <button type="submit" name="add_team" value="Submit" class="btn btn_team_submit" form="add_form">
                        <img src="{% static 'images/' %}{{ config.submitTeamIcon }}" alt="submit_team">
                        <p>{{ config.submitAddTeam }}</p>
                    </button>
                    <button type="submit" name="cancel_team" value="Cancel" class="btn btn_team_cancel" form="add_form" formnovalidate>
                        <img src="{% static 'images/' %}{{ config.cancelTeamIcon }}" alt="cancel_team">
                        <p>{{ config.submitAbort }}</p>
                    </button>
                </div>
            {% else %}
                <div class="submit_team">
                    <form method="POST" action="" id="none_form">
                        {% csrf_token %}
                        <button type="submit" name="show_add_form" value="Add" class="btn btn_add_team_show">
                            <img src="{% static 'images/' %}{{ config.addTeamIcon }}" alt="add_team">
                            <p>{{ config.addTeam }}</p>
                        </button>
                    </form>
                </div>
            {% endif %}
        {% endif %}
    </div>
    <div class="team_list container-fluid">
        <div class="team_header">
            <h2>{{ config.teamListHeader }}</h2>
            <p>{{ config.activeTeams }}: {{ content.activeTeams }} von {{ content.totalTeams }}</p>
        </div>
        <div class="team_list_content container-fluid">
            {% for t in content.teams %}
                <div class="row">
                    <div class="col-auto {% if t.active %}active{% else %}inactive{% endif %}">
                        {{ t.id }}
                    </div>
                    <div class="col-3 {% if t.active %}active{% else %}inactive{% endif %}">
                        {{ t.name }}
                    </div>
                    <div class="col-2 {% if t.active %}active{% else %}inactive{% endif %}">
                        {{ t.company }}
                    </div>
                    <div class="col-2 {% if t.active %}active{% else %}inactive{% endif %}">
                        {{ t.contact }}
                    </div>
                    <div class="col-2 {% if t.active %}active{% else %}inactive{% endif %}">
                        {{ t.email }}
                    </div>
                    <div class="col-2 {% if t.active %}active{% else %}inactive{% endif %}">
                        {{ t.address }}
                    </div>
                    <div class="col-2 {% if t.active %}active{% else %}inactive{% endif %}">
                        {{ t.phone }}
                    </div>
                    <div class="col-2 {% if t.active %}active{% else %}inactive{% endif %}">
                        {{ t.date|date:'d.m.Y' }}
                    </div>
                    <div class="col">
                        <div class="row">
                            <form method="POST" action="" id="none_form" class="col-auto m-0 p-0 team_button">
                                {% csrf_token %}
                                <button type="submit" name="edit_team" value="{{ t.id }}" class="btn_team_icon">
                                    <img src="{% static 'images/' %}{{ config.editTeamIcon }}" alt="edit_team">
                                </button>
                            </form>
                            <form method="POST" action="" id="none_form" class="col-auto m-0 p-0 team_button">
                                {% csrf_token %}
                                <button type="submit" name="activate_team" value="{{ t.name }}" class="btn_team_icon">
                                    {% if t.active %}
                                    <img src="{% static 'images/' %}{{ config.activeTeamIcon }}" alt="active_team">
                                    {% else %}
                                    <img src="{% static 'images/' %}{{ config.inactiveTeamIcon }}" alt="inactive_team">
                                    {% endif %}
                                </button>
                            </form>
                            <form method="POST" action="" id="none_form" class="col-auto m-0 p-0 team_button">
                                {% csrf_token %}
                                <button type="submit" name="waitlist_team" value="{{ t.name }}" class="btn_team_icon">
                                    {% if t.wait %}
                                    <img src="{% static 'images/' %}{{ config.activeTeamIcon }}" alt="wait_team">
                                    {% else %}
                                    <img src="{% static 'images/' %}{{ config.inactiveTeamIcon }}" alt="nowait_team">
                                    {% endif %}
                                </button>
                            </form>
                            <form method="POST" action="" id="none_form" class="col-auto m-0 p-0 team_button">
                                {% csrf_token %}
                                <button type="submit" name="delete_team" value="{{ t.name }}" class="btn_team_icon" onclick="return confirm('{{ config.warningDeleteTeam }}');">
                                    <img src="{% static 'images/' %}{{ config.removeTeamIcon }}" alt="remove_team">
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}
